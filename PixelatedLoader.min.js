var PixelatedLoader=function(){function A(b){for(var e="",d=0;d<b.length;d++)e+=String.fromCharCode(b.charCodeAt(d)&255);return e}function F(b){b=A(b);for(var e=[];b.length>=m;){for(var d=0,n=m-1;0<=n;n--)d*=256,d+=b.charCodeAt(n);e.push(d);b=b.substr(m)}return e}var H=function(){var b=[],e={};return{add:function(d){b.push(d)},execute:function(d){e[d]=!0;for(d=0;0<b.length&&e[b[0]];){var n=b.shift();delete e[n];n();d++}}}},m=4;return{load:function(b,e){var d,n,p,B,u,C,t=b.getContext("2d"),v=document.createElement("canvas"),
y=v.getContext("2d"),a=0,D=0,G=H(),f=new XMLHttpRequest;f.open("get",e,!0);f.responseType="text";f.overrideMimeType("text/plain; charset=x-user-defined");var k=0,z=[function(){var E=3*m;if(!f.response||f.response.length<a+E)return!1;var c=F(f.response.substring(a,a+E));d=c[0];n=c[1];p=c[2];B=d*Math.pow(2,p-1);u=n*Math.pow(2,p-1);b.width=B;b.height=u;a+=E;return!0},function(){var b=m*p;if(f.response.length<a+b)return!1;C=F(f.response.substring(a,a+b));a+=b;return!0},function(){var b=C[0];if(f.response.length<
a+b)return!1;var c=new Image;c.onload=function(){v.width=c.width;v.height=c.height;y.drawImage(c,0,0);for(var b=y.getImageData(0,0,c.width,c.height).data,a=u/c.height,d=0;d<c.width;d++)for(var f=0;f<c.height;f++){t.beginPath();t.rect(d*a,f*a,a,a);for(var g=4*(d+f*c.width),e=t,g=(65536*b[g]+256*b[g+1]+b[g+2]).toString(16);6>g.length;)g="0"+g;e.fillStyle="#"+g;t.fill()}};c.src="data:image/jpeg;base64,"+window.btoa(A(f.response.substring(a,a+b)));a+=b;D=1;return!0},function(){function d(){v.width=e.width;
v.height=e.height;y.drawImage(e,0,0);for(var a=y.getImageData(0,0,e.width,e.height).data,f=t.getImageData(0,0,B,u),c=f.data,g=u/e.height,r=g/2,n=e.width/3,l=0,k=0;k<e.height;k++)for(var m=0;m<n;m++){var p=a[l++],w=a[l++],x=a[l++];l++;for(var q=0;q<r;q++)for(var h=4*(m*g+r+(k*g+q)*b.width),s=0;s<r;s++)c[h++]=p,c[h++]=w,c[h++]=x,h++;p=a[l++];w=a[l++];x=a[l++];l++;for(q=0;q<r;q++)for(h=4*(m*g+(k*g+r+q)*b.width),s=0;s<r;s++)c[h++]=p,c[h++]=w,c[h++]=x,h++;p=a[l++];w=a[l++];x=a[l++];l++;for(q=0;q<r;q++)for(h=
4*(m*g+r+(k*g+r+q)*b.width),s=0;s<r;s++)c[h++]=p,c[h++]=w,c[h++]=x,h++}t.putImageData(f,0,0)}var c=C[D];if(f.response.length<a+c)return!1;var e=new Image;G.add(d);e.onload=function(){G.execute(d)};e.src="data:image/jpeg;base64,"+window.btoa(A(f.response.substring(a,a+c)));a+=c;return++D>=p}];f.addEventListener("progress",function(a){for(;k<z.length&&z[k]();)k++});f.onload=function(){intervalID=setInterval(function(){k<z.length?z[k]()&&k++:clearInterval(intervalID)},50)};f.send()}}}();